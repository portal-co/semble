{"mappings":";AACA,gBAAgB,OAAO,OAAO,CAAC;AAC/B,0BAA0B;IACxB,YAAY,CAAC,EAAE,mBAAoB,CAAC;IACpC,KAAK,CAAC,EAAE,MAAM,CAAC;IACf,MAAM,CAAC,EAAE,SAAS,GAAG,OAAO,WAAW,MAAM,CAAC;IAC9C,KAAK,CAAC,EAAE,SAAS,GAAG,OAAO,WAAW,KAAK,CAAC;IAC5C,OAAO,CAAC,EAAE,SAAS,GAAG,QAAQ,CAAC;IAC/B,cAAc,CAAC,EAAE,SAAS,GAAG,OAAO,OAAO,cAAc,CAAC;IAC1D,wBAAwB,CAAC,EAAE,SAAS,GAAG,OAAO,OAAO,wBAAwB,CAAC;IAC9E,MAAM,CAAC,EAAE,OAAO,WAAW,MAAM,CAAC;CACnC,CAAC;AACF,+BAA+B,EAC7B,YAA4B,EAC5B,KAA2B,EAC3B,cAA0B,EAC1B,wBAAoC,EACpC,OAAmB,EACnB,KAAiB,EACjB,MAAkB,EAClB,MAA0B,GAC3B,GAAE,WAAgB,GAAG,OAAO,OAAO,CAmEnC","sources":["weak-map/factory/weak-map/factory/index.ts","weak-map/factory/index.ts"],"sourcesContent":[null,"import { polyfillKeys as _polyfillKeys } from \"@portal-solutions/semble-common\";\ntype _Reflect = typeof Reflect;\nexport type FactoryOpts = {\n  polyfillKeys?: typeof _polyfillKeys;\n  symId?: string;\n  Symbol?: undefined | typeof globalThis.Symbol;\n  Proxy?: undefined | typeof globalThis.Proxy;\n  Reflect?: undefined | _Reflect;\n  defineProperty?: undefined | typeof Object.defineProperty;\n  getOwnPropertyDescriptor?: undefined | typeof Object.getOwnPropertyDescriptor;\n  Object?: typeof globalThis.Object;\n};\nexport default function create({\n  polyfillKeys = _polyfillKeys,\n  symId = \"__sembleWeakMap__\",\n  defineProperty = undefined,\n  getOwnPropertyDescriptor = undefined,\n  Reflect = undefined,\n  Proxy = undefined,\n  Symbol = undefined,\n  Object = globalThis.Object,\n}: FactoryOpts = {}): typeof WeakMap {\n  return class WeakMapTemp {\n    static __symbol = Symbol !== undefined ? Symbol(symId) : symId;\n    static __create =\n      \"create\" in Object ? Object.create.bind(Object, null) : () => ({});\n    static {\n      let symbol = this.__symbol;\n      polyfillKeys[symbol] = true;\n      let create = this.__create;\n      for (var objectProperty of [\"seal\", \"freeze\", \"preventExtensions\"]) {\n        if (!(objectProperty in Object)) {\n          continue;\n        }\n        Object[objectProperty] =\n          Proxy !== undefined && Reflect !== undefined\n            ? ((apply) =>\n                new Proxy(Object[objectProperty], {\n                  apply(target, thisArg, argArray) {\n                    WeakMapTemp.__get(argArray[0]);\n                    return apply(target, thisArg, argArray);\n                  },\n                }))(Reflect.apply.bind(Reflect))\n            : ((old, b, ...args) => {\n                WeakMapTemp.__get(b);\n                return old(b, ...args);\n              }).bind(null, Object[objectProperty].bind(Object));\n      }\n    }\n    static __get(target: any): { [a: string]: any } {\n      if (getOwnPropertyDescriptor && defineProperty) {\n        const desc = getOwnPropertyDescriptor(target, this.__symbol);\n        if (desc) return desc.value;\n        const value = WeakMapTemp.__create();\n        defineProperty(target, this.__symbol, {\n          value,\n          enumerable: false,\n          writable: true,\n          configurable: false,\n        });\n        return value;\n      }\n      if (defineProperty && !(this.__symbol in target))\n        defineProperty(target, this.__symbol, {\n          value: WeakMapTemp.__create(),\n          enumerable: false,\n          writable: true,\n          configurable: false,\n        });\n      return (target[this.__symbol] ??= WeakMapTemp.__create());\n    }\n    id: string;\n    constructor() {\n      this.id = Math.random() + \"\";\n    }\n    delete(object) {\n      delete WeakMapTemp.__get(object)[this.id];\n    }\n    has(object) {\n      return this.id in WeakMapTemp.__get(object);\n    }\n    get(object) {\n      return WeakMapTemp.__get(object)[this.id];\n    }\n    set(object, value) {\n      WeakMapTemp.__get(object)[this.id] = value;\n    }\n  } as any;\n}\n"],"names":[],"version":3,"file":"index.d.ts.map"}