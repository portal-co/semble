{"mappings":";;;AACA,MAAM,uCAAiB,QAAQ;AAC/B,MAAM,iDAA2B,QAAQ;AACzC,MAAM,8BAAQ;AACP,IAAI,4CACT,aAAa,aACT,WAAW,OAAO,GACjB,MAAM;IACL,OAAO,WACL,YAAY,aAAa,WAAW,MAAM,CAAC,+BAAS,4BAAM;IAC5D,OAAO,WACL,YAAY,SAAS,OAAO,MAAM,CAAC,IAAI,CAAC,QAAQ,QAAQ,IAAO,CAAA,CAAC,CAAA,EAAG;IACrE,MAAO;QACL,IAAI,SAAS,IAAI,CAAC,QAAQ;QAC1B,CAAA,GAAA,mBAAW,CAAC,CAAC,OAAO,GAAG;QACvB,IAAI,SAAS,IAAI,CAAC,QAAQ;QAC1B,KAAK,IAAI,kBAAkB;YAAC;YAAQ;YAAU;SAAoB,CAAE;YAClE,IAAI,CAAE,CAAA,kBAAkB,MAAK,GAC3B;YAEF,MAAM,CAAC,eAAe,GACpB,WAAW,aACP,AAAC,CAAA,CAAC,QACA,IAAI,WAAW,KAAK,CAAC,MAAM,CAAC,eAAe,EAAE;oBAC3C,OAAM,MAAM,EAAE,OAAO,EAAE,QAAQ;wBAC7B,YAAY,KAAK,CAAC,QAAQ,CAAC,EAAE;wBAC7B,OAAO,MAAM,QAAQ,SAAS;oBAChC;gBACF,EAAC,EAAG,QAAQ,KAAK,CAAC,IAAI,CAAC,YACzB,AAAC,CAAA,CAAC,KAAK,GAAG,GAAG;gBACX,YAAY,KAAK,CAAC;gBAClB,OAAO,IAAI,MAAM;YACnB,CAAA,EAAG,IAAI,CAAC,MAAM,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;QAClD;IACF,CAAC;IACD,OAAO,MAAM,MAAW,EAAwB;QAC9C,IAAI,kDAA4B,sCAAgB;YAC9C,MAAM,OAAO,+CAAyB,QAAQ,IAAI,CAAC,QAAQ;YAC3D,IAAI,MAAM,OAAO,KAAK,KAAK;YAC3B,MAAM,QAAQ,YAAY,QAAQ;YAClC,qCAAe,QAAQ,IAAI,CAAC,QAAQ,EAAE;uBACpC;gBACA,YAAY;gBACZ,UAAU;gBACV,cAAc;YAChB;YACA,OAAO;QACT;QACA,IAAI,wCAAkB,CAAE,CAAA,IAAI,CAAC,QAAQ,IAAI,MAAK,GAC5C,qCAAe,QAAQ,IAAI,CAAC,QAAQ,EAAE;YACpC,OAAO,YAAY,QAAQ;YAC3B,YAAY;YACZ,UAAU;YACV,cAAc;QAChB;QACF,OAAQ,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,YAAY,QAAQ;IACxD;IACA,GAAW;IACX,aAAc;QACZ,IAAI,CAAC,EAAE,GAAG,KAAK,MAAM,KAAK;IAC5B;IACA,OAAO,MAAM,EAAE;QACb,OAAO,YAAY,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;IAC3C;IACA,IAAI,MAAM,EAAE;QACV,OAAO,IAAI,CAAC,EAAE,IAAI,YAAY,KAAK,CAAC;IACtC;IACA,IAAI,MAAM,EAAE;QACV,OAAO,YAAY,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;IAC3C;IACA,IAAI,MAAM,EAAE,KAAK,EAAE;QACjB,YAAY,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG;IACvC;AACF","sources":["weak-map/index.ts"],"sourcesContent":["import { polyfillKeys } from \"@portal-solutions/semble-common\";\nconst defineProperty = Object?.defineProperty;\nconst getOwnPropertyDescriptor = Object?.getOwnPropertyDescriptor;\nconst symId = \"__SembleWeakMap\";\nexport let _WeakMap: typeof WeakMap =\n  \"WeakMap\" in globalThis\n    ? globalThis.WeakMap\n    : (class WeakMapTemp {\n        static __symbol =\n          \"Symbol\" in globalThis ? globalThis.Symbol(symId) : symId;\n        static __create =\n          \"create\" in Object ? Object.create.bind(Object, null) : () => ({});\n        static {\n          let symbol = this.__symbol;\n          polyfillKeys[symbol] = true;\n          let create = this.__create;\n          for (var objectProperty of [\"seal\", \"freeze\", \"preventExtensions\"]) {\n            if (!(objectProperty in Object)) {\n              continue;\n            }\n            Object[objectProperty] =\n              \"Proxy\" in globalThis\n                ? ((apply) =>\n                    new globalThis.Proxy(Object[objectProperty], {\n                      apply(target, thisArg, argArray) {\n                        WeakMapTemp.__get(argArray[0]);\n                        return apply(target, thisArg, argArray);\n                      },\n                    }))(Reflect.apply.bind(Reflect))\n                : ((old, b, ...args) => {\n                    WeakMapTemp.__get(b);\n                    return old(b, ...args);\n                  }).bind(null, Object[objectProperty].bind(Object));\n          }\n        }\n        static __get(target: any): { [a: string]: any } {\n          if (getOwnPropertyDescriptor && defineProperty) {\n            const desc = getOwnPropertyDescriptor(target, this.__symbol);\n            if (desc) return desc.value;\n            const value = WeakMapTemp.__create();\n            defineProperty(target, this.__symbol, {\n              value,\n              enumerable: false,\n              writable: true,\n              configurable: false,\n            });\n            return value;\n          }\n          if (defineProperty && !(this.__symbol in target))\n            defineProperty(target, this.__symbol, {\n              value: WeakMapTemp.__create(),\n              enumerable: false,\n              writable: true,\n              configurable: false,\n            });\n          return (target[this.__symbol] ??= WeakMapTemp.__create());\n        }\n        id: string;\n        constructor() {\n          this.id = Math.random() + \"\";\n        }\n        delete(object) {\n          delete WeakMapTemp.__get(object)[this.id];\n        }\n        has(object) {\n          return this.id in WeakMapTemp.__get(object);\n        }\n        get(object) {\n          return WeakMapTemp.__get(object)[this.id];\n        }\n        set(object, value) {\n          WeakMapTemp.__get(object)[this.id] = value;\n        }\n      } as any);\n"],"names":[],"version":3,"file":"index.js.map"}