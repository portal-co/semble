{"mappings":"AAIA,OAAO,IAAI,UAAU,OAAO,OA6CpB,CAAC","sources":["weak-map/weak-map/index.ts","weak-map/index.ts"],"sourcesContent":[null,"import { polyfillKeys } from \"@portal-solutions/semble-common\";\nconst defineProperty = Object?.defineProperty;\nconst getOwnPropertyDescriptor = Object?.getOwnPropertyDescriptor;\nconst symId = '__SembleWeakMap';\nexport let _WeakMap: typeof WeakMap = 'WeakMap' in globalThis ? globalThis.WeakMap : class WeakMapTemp {\n    static __symbol = 'Symbol' in globalThis ? globalThis.Symbol(symId) : symId;\n    static __create = 'create' in Object ? Object.create.bind(Object, null) : () => ({});\n    static {\n        let symbol = this.__symbol;\n        polyfillKeys[symbol] = true;\n        let create = this.__create;\n        for (var a of ['seal', 'freeze','preventExtensions']) {\n            if (!(a in Object)) {\n                continue\n            }; Object[a] = 'Proxy' in globalThis ? (apply => new globalThis.Proxy(Object[a], {\n                apply(target, thisArg, argArray) {\n                    WeakMapTemp.__get(argArray[0]);\n                    return apply(target, thisArg, argArray);\n                },\n            }))(Reflect.apply.bind(Reflect)) : ((old, b, ...args) => { WeakMapTemp.__get(b); return old(b, ...args) }).bind(null, Object[a].bind(Object))\n        }\n    }\n    static __get(a: any): { [a: string]: any } {\n        if (getOwnPropertyDescriptor && defineProperty) {\n            const desc = getOwnPropertyDescriptor(a, this.__symbol);\n            if (desc) return desc.value;\n            const value = WeakMapTemp.__create();\n            defineProperty(a, this.__symbol, { value, enumerable: false, writable: true, configurable: false });\n            return value;\n        }\n        if (defineProperty && !(this.__symbol in a)) defineProperty(a, this.__symbol, { value: WeakMapTemp.__create(), enumerable: false, writable: true, configurable: false });\n        return (a[this.__symbol] ??= WeakMapTemp.__create())\n    }\n    id: string;\n    constructor() {\n        this.id = Math.random() + \"\";\n    };\n    delete(o) {\n        delete WeakMapTemp.__get(o)[this.id];\n    }\n    has(o) {\n        return this.id in WeakMapTemp.__get(o);\n    }\n    get(o) {\n        return WeakMapTemp.__get(o)[this.id]\n    }\n    set(o, v) {\n        WeakMapTemp.__get(o)[this.id] = v;\n    }\n} as any;"],"names":[],"version":3,"file":"index.d.ts.map"}